-- phpMyAdmin SQL Dump
-- version 4.1.14
-- http://www.phpmyadmin.net
--
-- Client :  127.0.0.1
-- Généré le :  Ven 30 Septembre 2022 à 20:50
-- Version du serveur :  5.6.17
-- Version de PHP :  5.5.12

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Base de données :  `tracegps`
--

-- --------------------------------------------------------

--
-- Structure de la table `tracegps_autorisations`
--

CREATE TABLE IF NOT EXISTS `tracegps_autorisations` (
  `idAutorisant` int(11) NOT NULL,
  `idAutorise` int(11) NOT NULL,
  PRIMARY KEY (`idAutorisant`,`idAutorise`),
  KEY `fkuser2` (`idAutorise`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Contenu de la table `tracegps_autorisations`
--

INSERT INTO `tracegps_autorisations` (`idAutorisant`, `idAutorise`) VALUES
(2, 1),
(4, 6),
(5, 6),
(5, 7),
(6, 7),
(6, 8),
(7, 8),
(7, 9),
(8, 9),
(8, 10),
(9, 10),
(9, 11),
(10, 11),
(10, 12),
(11, 12),
(11, 13);

-- --------------------------------------------------------

--
-- Structure de la table `tracegps_points`
--

CREATE TABLE IF NOT EXISTS `tracegps_points` (
  `idTrace` int(11) NOT NULL,
  `id` int(11) NOT NULL,
  `latitude` double NOT NULL,
  `longitude` double NOT NULL,
  `altitude` double NOT NULL,
  `dateHeure` timestamp NOT NULL,
  `rythmeCardio` int(3) NOT NULL,
  PRIMARY KEY (`idTrace`,`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Contenu de la table `tracegps_points`
--

INSERT INTO `tracegps_points` (`idTrace`, `id`, `latitude`, `longitude`, `altitude`, `dateHeure`, `rythmeCardio`) VALUES
(1, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(1, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(1, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(1, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(1, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(1, 6, 48.2, -1.55, 50, '2019-10-15 13:25:44', 80),
(2, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(2, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(2, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(2, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(2, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(2, 6, 48.2159, -1.5485, 110, '2018-01-19 12:10:28', 86),
(2, 7, 48.2169, -1.5475, 120, '2018-01-19 12:10:48', 87),
(2, 8, 48.2179, -1.5465, 130, '2018-01-19 12:11:08', 88),
(2, 9, 48.2189, -1.5455, 140, '2018-01-19 12:11:28', 89),
(2, 10, 48.2199, -1.5445, 150, '2018-01-19 12:11:48', 90),
(3, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(3, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(3, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(3, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(3, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(4, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(4, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(4, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(4, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(4, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(4, 6, 48.2159, -1.5485, 110, '2018-01-19 12:10:28', 86),
(4, 7, 48.2169, -1.5475, 120, '2018-01-19 12:10:48', 87),
(4, 8, 48.2179, -1.5465, 130, '2018-01-19 12:11:08', 88),
(4, 9, 48.2189, -1.5455, 140, '2018-01-19 12:11:28', 89),
(4, 10, 48.2199, -1.5445, 150, '2018-01-19 12:11:48', 90),
(5, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(5, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(5, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(5, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(5, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(6, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(6, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(6, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(6, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(6, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(6, 6, 48.2159, -1.5485, 110, '2018-01-19 12:10:28', 86),
(6, 7, 48.2169, -1.5475, 120, '2018-01-19 12:10:48', 87),
(6, 8, 48.2179, -1.5465, 130, '2018-01-19 12:11:08', 88),
(6, 9, 48.2189, -1.5455, 140, '2018-01-19 12:11:28', 89),
(6, 10, 48.2199, -1.5445, 150, '2018-01-19 12:11:48', 90),
(7, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(7, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(7, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(7, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(7, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(8, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(8, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(8, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(8, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(8, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(8, 6, 48.2159, -1.5485, 110, '2018-01-19 12:10:28', 86),
(8, 7, 48.2169, -1.5475, 120, '2018-01-19 12:10:48', 87),
(8, 8, 48.2179, -1.5465, 130, '2018-01-19 12:11:08', 88),
(8, 9, 48.2189, -1.5455, 140, '2018-01-19 12:11:28', 89),
(8, 10, 48.2199, -1.5445, 150, '2018-01-19 12:11:48', 90),
(9, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(9, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(9, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(9, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(9, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(10, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(10, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(10, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(10, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(10, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(10, 6, 48.2159, -1.5485, 110, '2018-01-19 12:10:28', 86),
(10, 7, 48.2169, -1.5475, 120, '2018-01-19 12:10:48', 87),
(10, 8, 48.2179, -1.5465, 130, '2018-01-19 12:11:08', 88),
(10, 9, 48.2189, -1.5455, 140, '2018-01-19 12:11:28', 89),
(10, 10, 48.2199, -1.5445, 150, '2018-01-19 12:11:48', 90),
(11, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(11, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(11, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(11, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(11, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(12, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(12, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(12, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(12, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(12, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(12, 6, 48.2159, -1.5485, 110, '2018-01-19 12:10:28', 86),
(12, 7, 48.2169, -1.5475, 120, '2018-01-19 12:10:48', 87),
(12, 8, 48.2179, -1.5465, 130, '2018-01-19 12:11:08', 88),
(12, 9, 48.2189, -1.5455, 140, '2018-01-19 12:11:28', 89),
(12, 10, 48.2199, -1.5445, 150, '2018-01-19 12:11:48', 90),
(13, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(13, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(13, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(13, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(13, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(14, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(14, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(14, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(14, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(14, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(14, 6, 48.2159, -1.5485, 110, '2018-01-19 12:10:28', 86),
(14, 7, 48.2169, -1.5475, 120, '2018-01-19 12:10:48', 87),
(14, 8, 48.2179, -1.5465, 130, '2018-01-19 12:11:08', 88),
(14, 9, 48.2189, -1.5455, 140, '2018-01-19 12:11:28', 89),
(14, 10, 48.2199, -1.5445, 150, '2018-01-19 12:11:48', 90),
(15, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(15, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(15, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(15, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(15, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(16, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(16, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(16, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(16, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(16, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(16, 6, 48.2159, -1.5485, 110, '2018-01-19 12:10:28', 86),
(16, 7, 48.2169, -1.5475, 120, '2018-01-19 12:10:48', 87),
(16, 8, 48.2179, -1.5465, 130, '2018-01-19 12:11:08', 88),
(16, 9, 48.2189, -1.5455, 140, '2018-01-19 12:11:28', 89),
(16, 10, 48.2199, -1.5445, 150, '2018-01-19 12:11:48', 90),
(17, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(17, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(17, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(17, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(17, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(18, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(18, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(18, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(18, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(18, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(18, 6, 48.2159, -1.5485, 110, '2018-01-19 12:10:28', 86),
(18, 7, 48.2169, -1.5475, 120, '2018-01-19 12:10:48', 87),
(18, 8, 48.2179, -1.5465, 130, '2018-01-19 12:11:08', 88),
(18, 9, 48.2189, -1.5455, 140, '2018-01-19 12:11:28', 89),
(18, 10, 48.2199, -1.5445, 150, '2018-01-19 12:11:48', 90),
(19, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(19, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(19, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(19, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(19, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(20, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(20, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(20, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(20, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(20, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(20, 6, 48.2159, -1.5485, 110, '2018-01-19 12:10:28', 86),
(20, 7, 48.2169, -1.5475, 120, '2018-01-19 12:10:48', 87),
(20, 8, 48.2179, -1.5465, 130, '2018-01-19 12:11:08', 88),
(20, 9, 48.2189, -1.5455, 140, '2018-01-19 12:11:28', 89),
(20, 10, 48.2199, -1.5445, 150, '2018-01-19 12:11:48', 90),
(21, 1, 48.2109, -1.5535, 60, '2018-01-19 12:08:48', 81),
(21, 2, 48.2119, -1.5525, 70, '2018-01-19 12:09:08', 82),
(21, 3, 48.2129, -1.5515, 80, '2018-01-19 12:09:28', 83),
(21, 4, 48.2139, -1.5505, 90, '2018-01-19 12:09:48', 84),
(21, 5, 48.2149, -1.5495, 100, '2018-01-19 12:10:08', 85),
(22, 1, 47.985712199999995, -2.3859269, 0, '2020-05-12 14:59:14', 0),
(23, 1, 47.985712199999995, -2.3859269, 0, '2020-05-12 14:59:16', 0),
(24, 1, 47.985712199999995, -2.3859269, 0, '2020-05-12 14:59:19', 0),
(24, 2, 48.001843199999996, -2.4117248, 0, '2020-05-12 14:59:36', 0),
(24, 3, 47.9858067, -2.3859264, 0, '2020-05-12 14:59:54', 0);

-- --------------------------------------------------------

--
-- Structure de la table `tracegps_traces`
--

CREATE TABLE IF NOT EXISTS `tracegps_traces` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `dateDebut` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `dateFin` timestamp NULL DEFAULT NULL,
  `terminee` tinyint(1) NOT NULL,
  `idUtilisateur` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `fkuser3` (`idUtilisateur`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=25 ;

--
-- Contenu de la table `tracegps_traces`
--

INSERT INTO `tracegps_traces` (`id`, `dateDebut`, `dateFin`, `terminee`, `idUtilisateur`) VALUES
(1, '2018-01-19 12:08:48', NULL, 0, 2),
(2, '2018-01-19 12:08:48', '2018-01-19 12:11:48', 1, 2),
(3, '2018-01-19 12:08:48', NULL, 0, 3),
(4, '2018-01-19 12:08:48', '2018-01-19 12:11:48', 1, 3),
(5, '2018-01-19 12:08:48', NULL, 0, 4),
(6, '2018-01-19 12:08:48', '2018-01-19 12:11:48', 1, 4),
(7, '2018-01-19 12:08:48', NULL, 0, 5),
(8, '2018-01-19 12:08:48', '2018-01-19 12:11:48', 1, 5),
(9, '2018-01-19 12:08:48', NULL, 0, 6),
(10, '2018-01-19 12:08:48', '2018-01-19 12:11:48', 1, 6),
(11, '2018-01-19 12:08:48', NULL, 0, 7),
(12, '2018-01-19 12:08:48', '2018-01-19 12:11:48', 1, 7),
(13, '2018-01-19 12:08:48', NULL, 0, 8),
(14, '2018-01-19 12:08:48', '2018-01-19 12:11:48', 1, 8),
(15, '2018-01-19 12:08:48', NULL, 0, 9),
(16, '2018-01-19 12:08:48', '2018-01-19 12:11:48', 1, 9),
(17, '2018-01-19 12:08:48', NULL, 0, 10),
(18, '2018-01-19 12:08:48', '2018-01-19 12:11:48', 1, 10),
(19, '2018-01-19 12:08:48', NULL, 0, 11),
(20, '2018-01-19 12:08:48', '2018-01-19 12:11:48', 1, 11),
(21, '2018-01-19 12:08:48', NULL, 0, 12),
(22, '2020-05-12 14:59:14', NULL, 0, 3),
(23, '2020-05-12 14:59:16', NULL, 0, 3),
(24, '2020-05-12 14:59:19', NULL, 1, 3);

-- --------------------------------------------------------

--
-- Structure de la table `tracegps_utilisateurs`
--

CREATE TABLE IF NOT EXISTS `tracegps_utilisateurs` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pseudo` varchar(30) NOT NULL,
  `mdpSha1` varchar(40) NOT NULL,
  `adrMail` varchar(75) NOT NULL,
  `numTel` varchar(14) DEFAULT NULL,
  `niveau` int(1) NOT NULL DEFAULT '1',
  `dateCreation` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `pseudo` (`pseudo`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=16 ;

--
-- Contenu de la table `tracegps_utilisateurs`
--

INSERT INTO `tracegps_utilisateurs` (`id`, `pseudo`, `mdpSha1`, `adrMail`, `numTel`, `niveau`, `dateCreation`) VALUES
(1, 'admin', 'ff9fff929a1292db1c00e3142139b22ee4925177', 'delasalle.sio.couasnon.c@gmail.com', '11.22.33.44.55', 2, '2019-09-24 12:18:59'),
(2, 'callisto', '13e3668bbee30b004380052b086457b014504b3e', 'delasalle.sio.couasnon.c@gmail.com', '22.33.44.55.66', 1, '2019-09-24 12:18:59'),
(3, 'europa', 'ebb89d640073601b1d24b57caa51c6693e158a13', 'delasalle.sio.couasnon.c@gmail.com', '22.33.44.55.66', 1, '2019-09-24 12:18:59'),
(4, 'galileo', '13e3668bbee30b004380052b086457b014504b3e', 'delasalle.sio.onfray.g@gmail.com', '22.33.44.55.66', 1, '2019-09-24 12:18:59'),
(5, 'helios', '13e3668bbee30b004380052b086457b014504b3e', 'delasalle.sio.onfray.g@gmail.com', '33.44.55.66.77', 1, '2019-09-24 12:18:59'),
(6, 'indigo', '13e3668bbee30b004380052b086457b014504b3e', 'delasalle.sio.onfray.g@gmail.com', '44.55.66.77.88', 1, '2019-09-24 12:18:59'),
(7, 'juno', '13e3668bbee30b004380052b086457b014504b3e', 'delasalle.sio.onfray.g@gmail.com', '44.55.66.77.88', 1, '2019-09-24 12:18:59'),
(8, 'kepler', '13e3668bbee30b004380052b086457b014504b3e', 'delasalle.sio.fortounatto.y@gmail.com', '44.55.66.77.88', 1, '2019-09-24 12:18:59'),
(9, 'luna', '13e3668bbee30b004380052b086457b014504b3e', 'delasalle.sio.fortounatto.y@gmail.com', '44.55.66.77.88', 1, '2019-09-24 12:18:59'),
(10, 'mars', '13e3668bbee30b004380052b086457b014504b3e', 'delasalle.sio.fortounatto.y@gmail.com', '44.55.66.77.88', 1, '2019-09-24 12:18:59'),
(11, 'neon', '13e3668bbee30b004380052b086457b014504b3e', 'delasalle.sio.fortounatto.y@gmail.com', '44.55.66.77.88', 1, '2019-09-24 12:18:59'),
(12, 'oxygen', '13e3668bbee30b004380052b086457b014504b3e', 'delasalle.sio.couasnon.c@gmail.com', '44.55.66.77.88', 1, '2019-09-24 12:18:59'),
(13, 'photon', '13e3668bbee30b004380052b086457b014504b3e', 'delasalle.sio.couasnon.c@gmail.com', '44.55.66.77.88', 1, '2019-09-24 12:18:59'),
(15, 'Billy', 'ff9fff929a1292db1c00e3142139b22ee4925177', 'toto@gmail.com', '55.66.77.88.99', 1, '2019-10-08 12:29:11');

-- --------------------------------------------------------

--
-- Doublure de structure pour la vue `tracegps_vue_traces`
--
CREATE TABLE IF NOT EXISTS `tracegps_vue_traces` (
`id` int(11)
,`dateDebut` timestamp
,`dateFin` timestamp
,`terminee` tinyint(1)
,`idUtilisateur` int(11)
,`pseudo` varchar(30)
,`nbPoints` bigint(21)
);
-- --------------------------------------------------------

--
-- Doublure de structure pour la vue `tracegps_vue_utilisateurs`
--
CREATE TABLE IF NOT EXISTS `tracegps_vue_utilisateurs` (
`id` int(11)
,`pseudo` varchar(30)
,`mdpSha1` varchar(40)
,`adrMail` varchar(75)
,`numTel` varchar(14)
,`niveau` int(1)
,`dateCreation` timestamp
,`nbTraces` bigint(21)
,`dateDerniereTrace` timestamp
);
-- --------------------------------------------------------

--
-- Structure de la vue `tracegps_vue_traces`
--
DROP TABLE IF EXISTS `tracegps_vue_traces`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `tracegps_vue_traces` AS select `tracegps_traces`.`id` AS `id`,`tracegps_traces`.`dateDebut` AS `dateDebut`,`tracegps_traces`.`dateFin` AS `dateFin`,`tracegps_traces`.`terminee` AS `terminee`,`tracegps_traces`.`idUtilisateur` AS `idUtilisateur`,`tracegps_utilisateurs`.`pseudo` AS `pseudo`,count(`tracegps_points`.`id`) AS `nbPoints` from ((`tracegps_traces` join `tracegps_utilisateurs` on((`tracegps_traces`.`idUtilisateur` = `tracegps_utilisateurs`.`id`))) left join `tracegps_points` on((`tracegps_traces`.`id` = `tracegps_points`.`idTrace`))) group by `tracegps_traces`.`id`,`tracegps_traces`.`dateDebut`,`tracegps_traces`.`dateFin`,`tracegps_traces`.`terminee`,`tracegps_traces`.`idUtilisateur`,`tracegps_utilisateurs`.`pseudo` order by `tracegps_traces`.`id`;

-- --------------------------------------------------------

--
-- Structure de la vue `tracegps_vue_utilisateurs`
--
DROP TABLE IF EXISTS `tracegps_vue_utilisateurs`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `tracegps_vue_utilisateurs` AS select `tracegps_utilisateurs`.`id` AS `id`,`tracegps_utilisateurs`.`pseudo` AS `pseudo`,`tracegps_utilisateurs`.`mdpSha1` AS `mdpSha1`,`tracegps_utilisateurs`.`adrMail` AS `adrMail`,`tracegps_utilisateurs`.`numTel` AS `numTel`,`tracegps_utilisateurs`.`niveau` AS `niveau`,`tracegps_utilisateurs`.`dateCreation` AS `dateCreation`,count(`tracegps_traces`.`id`) AS `nbTraces`,max(`tracegps_traces`.`dateDebut`) AS `dateDerniereTrace` from (`tracegps_utilisateurs` left join `tracegps_traces` on((`tracegps_utilisateurs`.`id` = `tracegps_traces`.`idUtilisateur`))) group by `tracegps_utilisateurs`.`id`,`tracegps_utilisateurs`.`pseudo`,`tracegps_utilisateurs`.`mdpSha1`,`tracegps_utilisateurs`.`adrMail`,`tracegps_utilisateurs`.`numTel`,`tracegps_utilisateurs`.`niveau`,`tracegps_utilisateurs`.`dateCreation` order by `tracegps_utilisateurs`.`pseudo`;

--
-- Contraintes pour les tables exportées
--

--
-- Contraintes pour la table `tracegps_autorisations`
--
ALTER TABLE `tracegps_autorisations`
  ADD CONSTRAINT `fkuser1` FOREIGN KEY (`idAutorisant`) REFERENCES `tracegps_utilisateurs` (`id`),
  ADD CONSTRAINT `fkuser2` FOREIGN KEY (`idAutorise`) REFERENCES `tracegps_utilisateurs` (`id`);

--
-- Contraintes pour la table `tracegps_points`
--
ALTER TABLE `tracegps_points`
  ADD CONSTRAINT `fktrace` FOREIGN KEY (`idTrace`) REFERENCES `tracegps_traces` (`id`);

--
-- Contraintes pour la table `tracegps_traces`
--
ALTER TABLE `tracegps_traces`
  ADD CONSTRAINT `fkuser3` FOREIGN KEY (`idUtilisateur`) REFERENCES `tracegps_utilisateurs` (`id`);

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
